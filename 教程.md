# Vanction ç¼–ç¨‹è¯­è¨€æ•™ç¨‹

æ¬¢è¿Žæ¥åˆ°Vanctionç¼–ç¨‹è¯­è¨€æ•™ç¨‹ï¼æœ¬æ•™ç¨‹å°†ä»ŽåŸºç¡€å¼€å§‹ï¼Œé€æ­¥ä»‹ç»Vanctionè¯­è¨€çš„å„ç§ç‰¹æ€§å’Œç”¨æ³•ã€‚

## 1. çŽ¯å¢ƒæ­å»º

### 1.1 å®‰è£…å¿…è¦å·¥å…·

åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š

- **CMake**ï¼šç”¨äºŽæž„å»ºé¡¹ç›®
- **MinGW-w64 GCC**ï¼šC++ç¼–è¯‘å™¨

### 1.2 æž„å»ºVanction

æŒ‰ç…§README.mdä¸­çš„å®‰è£…æ­¥éª¤æž„å»ºVanctionç¼–è¯‘å™¨ï¼š

```bash
git clone https://github.com/bilibili-dideng/VanctionProgrammingLanguage.git
cd VanctionProgramLanguage
mkdir build
cd build
cmake ..
cmake --build .
```

### 1.3 éªŒè¯å®‰è£…

è¿è¡ŒHello Worldç¤ºä¾‹æ¥éªŒè¯å®‰è£…ï¼š

```bash
cd ..
./build/Vanction examples/test/hello_world.vn
```

å¦‚æžœçœ‹åˆ°è¾“å‡º"Hello, World!"ï¼Œè¯´æ˜Žå®‰è£…æˆåŠŸã€‚

## 2. åŸºç¡€è¯­æ³•

### 2.1 Hello World

è®©æˆ‘ä»¬ä»Žç»å…¸çš„Hello Worldç¨‹åºå¼€å§‹ï¼š

```vanction
func main() {
    System.print("Hello, Vanction!");
    return 0;
}
```

- `func`å…³é”®å­—ç”¨äºŽå®šä¹‰å‡½æ•°
- `main()`æ˜¯ç¨‹åºçš„å…¥å£å‡½æ•°
- `System.print()`ç”¨äºŽè¾“å‡ºå†…å®¹
- `return`è¯­å¥ç”¨äºŽè¿”å›žå€¼

### 2.2 ç”¨æˆ·è¾“å…¥
ä½¿ç”¨`System.input()`å‡½æ•°èŽ·å–ç”¨æˆ·è¾“å…¥ï¼š

```vanction
func main() {
    System.print("è¯·è¾“å…¥ä½ çš„å§“åï¼š");
    var name = System.input();
    System.print("ä½ å¥½ï¼Œ" + name + "!");
    return 0;
}
```

### 2.3 æ³¨é‡Š

Vanctionæ”¯æŒå•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šï¼š

```vanction
func main() {
    || è¿™æ˜¯ä¸€ä¸ªå•è¡Œæ³¨é‡Š
    var a = 10; || è¡Œå°¾æ³¨é‡Š
    |* è¿™æ˜¯ä¸€ä¸ª
   å¤šè¡Œæ³¨é‡Š *|
   |\ è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£æ³¨é‡Š
   * ç”¨äºŽå‡½æ•°æˆ–æ¨¡å—çš„æ–‡æ¡£è¯´æ˜Ž
   /|
   """ è¿™ä¹Ÿæ˜¯ä¸€ä¸ª
   å¤šè¡Œæ³¨é‡Š """
}

## 3. å˜é‡å’Œç±»åž‹

### 3.1 å˜é‡å£°æ˜Ž

ä½¿ç”¨`var`å…³é”®å­—å£°æ˜Žå˜é‡ï¼š

```vanction
var x = 10;          || æ•´æ•°
var name = "Vanction";  || å­—ç¬¦ä¸²
var is_active = true;   || å¸ƒå°”å€¼
var pi = 3.14159;       || æµ®ç‚¹æ•°
```

### 3.2 å¸¸é‡å£°æ˜Ž

ä½¿ç”¨`immut var`å£°æ˜Žä¸å¯å˜å¸¸é‡ï¼š

```vanction
immut var PI = 3.14159;
immut var VERSION = "1.0.0";
```

å¸¸é‡ä¸€æ—¦å£°æ˜Žï¼Œå°±ä¸èƒ½è¢«ä¿®æ”¹ï¼Œå¦åˆ™ä¼šå¼•å‘`ImmutError`ã€‚

### 3.3 ç±»åž‹ç³»ç»Ÿ

Vanctionæ˜¯åŠ¨æ€ç±»åž‹è¯­è¨€ï¼Œå˜é‡ç±»åž‹ä¼šæ ¹æ®èµ‹å€¼è‡ªåŠ¨æŽ¨æ–­ï¼š

- **æ•´æ•°**ï¼š`10`, `-5`, `0`
- **æµ®ç‚¹æ•°**ï¼š`3.14`, `-0.5`, `1.0`
- **å­—ç¬¦ä¸²**ï¼š`"hello"`, `'world'`
- **å¸ƒå°”å€¼**ï¼š`true`, `false`
- **åˆ—è¡¨**ï¼š`[1, 2, 3]`
- **å“ˆå¸Œè¡¨**ï¼š`{"key": "value"}`
- **å¯¹è±¡**ï¼š`instance Person("Alice")`

## 4. å‡½æ•°

### 4.1 å‡½æ•°å®šä¹‰

ä½¿ç”¨`func`å…³é”®å­—å®šä¹‰å‡½æ•°ï¼š

```vanction
func add(a, b) {
    return a + b;
}
```

### 4.2 å‡½æ•°è°ƒç”¨

```vanction
func main() {
    var result = add(5, 3);
    System.print("5 + 3 = " + result);
    return 0;
}
```

### 4.3 å‡½æ•°å‚æ•°

å‡½æ•°å¯ä»¥æŽ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå‚æ•°ç±»åž‹ä¼šè‡ªåŠ¨æŽ¨æ–­ï¼š

```vanction
func greet(name, age) {
    System.print("Hello, " + name + "! You are " + age + " years old.");
}
```

### 4.4 è¿”å›žå€¼

ä½¿ç”¨`return`è¯­å¥è¿”å›žå€¼ï¼š

```vanction
func multiply(a, b) {
    return a * b;
}
```

å¦‚æžœæ²¡æœ‰è¿”å›žå€¼ï¼Œå‡½æ•°é»˜è®¤è¿”å›ž`undefined`ã€‚

## 5. æŽ§åˆ¶æµ

### 5.1 æ¡ä»¶è¯­å¥

#### 5.1.1 ifè¯­å¥

```vanction
func main() {
    var x = 10;
    
    if (x > 5) {
        System.print("x is greater than 5");
    } else-if (x < 5) {
        System.print("x is less than 5");
    } else {
        System.print("x is equal to 5");
    }
    
    return 0;
}
```

#### 5.1.2 é€»è¾‘è¿ç®—ç¬¦

- `&`ï¼šé€»è¾‘ä¸Ž
- `|`ï¼šé€»è¾‘æˆ–
- `^`ï¼šé€»è¾‘å¼‚æˆ–

```vanction
if (x > 5 & y < 10) {
    || æ‰§è¡Œä»£ç 
}
```

### 5.3 switchè¯­å¥

Vanctionæ”¯æŒswitchè¯­å¥ï¼Œç”¨äºŽåŸºäºŽä¸åŒæ¡ä»¶å€¼æ‰§è¡Œä¸åŒçš„ä»£ç å—ï¼š

```vanction
func main() {
    var num = 2;
    
    switch (num) {
        case 1 {
            System.print("Case 1 executed");
        }
        case 2 {
            System.print("Case 2 executed");
        }
        case 3 {
            System.print("Case 3 executed");
        }
    }
    
    return 0;
}
```

**è¯´æ˜Ž**ï¼š
- `switch`å…³é”®å­—åŽé¢è·Ÿç€è¦æµ‹è¯•çš„è¡¨è¾¾å¼
- `case`å…³é”®å­—åŽé¢è·Ÿç€è¦åŒ¹é…çš„å€¼
- æ¯ä¸ªcaseå—ç”¨`{}`åŒ…å›´
- å½“åŒ¹é…åˆ°æŸä¸ªcaseæ—¶ï¼Œæ‰§è¡Œè¯¥caseçš„ä»£ç å—
- é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ä¼šè‡ªåŠ¨breakï¼Œä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcaseï¼ˆfallthroughè¡Œä¸ºï¼‰

**æ”¯æŒçš„ç±»åž‹**ï¼š
- æ•´æ•°
- å­—ç¬¦ä¸²
- å¸ƒå°”å€¼
- æµ®ç‚¹æ•°/åŒç²¾åº¦æ•°

```vanction
|| å­—ç¬¦ä¸²switch
var str = "hello";
switch (str) {
    case "hello" {
        System.print("Hello case executed");
    }
    case "world" {
        System.print("World case executed");
    }
}

|| å¸ƒå°”å€¼switch
var flag = true;
switch (flag) {
    case true {
        System.print("True case executed");
    }
    case false {
        System.print("False case executed");
    }
}
```

### 5.4 å¾ªçŽ¯ç»“æž„

#### 5.4.1 whileå¾ªçŽ¯

```vanction
func main() {
    var i = 0;
    while (i < 5) {
        System.print("i = " + i);
        i = i + 1;
    }
    return 0;
}
```

#### 5.4.2 do-whileå¾ªçŽ¯

```vanction
func main() {
    var i = 0;
    do {
        System.print("i = " + i);
        i = i + 1;
    } while (i < 5);
    return 0;
}
```

#### 5.4.3 forå¾ªçŽ¯

```vanction
func main() {
    for (var i = 0; i < 5; i = i + 1) {
        System.print("i = " + i);
    }
    return 0;
}
```

#### 5.4.4 for-inå¾ªçŽ¯

ç”¨äºŽéåŽ†é›†åˆï¼š

```vanction
func main() {
    || éåŽ†åˆ—è¡¨
    var numbers = [1, 2, 3, 4, 5];
    for (var num in numbers) {
        System.print("Number: " + num);
    }
    
    || éåŽ†å“ˆå¸Œè¡¨
    var person = {"name": "Bob", "age": 25};
    for (var key, var value in person) {
        System.print(key + ": " + value);
    }
    
    || éåŽ†èŒƒå›´
    for (var i in range(5)) {
        System.print("i = " + i);
    }
    
    return 0;
}
```

## 6. ç±»å’Œå¯¹è±¡

### 6.1 ç±»å®šä¹‰

ä½¿ç”¨`class`å…³é”®å­—å®šä¹‰ç±»ï¼š

```vanction
class Person() {
    || æˆå‘˜å˜é‡
    var name;
    var age;
    
    || æž„é€ å‡½æ•°
    instance.init(instance, name, age) {
        instance.name = name;
        instance.age = age;
    }
    
    || æˆå‘˜æ–¹æ³•
    instance.greet(instance) {
        System.print("Hello, my name is " + instance.name);
    }
    
    instance.get_age(instance) {
        return instance.age;
    }
}
```

### 6.2 åˆ›å»ºå¯¹è±¡

ä½¿ç”¨`instance`å…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼š

```vanction
func main() {
    var person = instance Person("Alice", 30);
    person.greet();
    System.print("Age: " + person.get_age());
    return 0;
}
```

### 6.3 ç»§æ‰¿

æ”¯æŒå•ç»§æ‰¿ï¼š

```vanction
class Employee(Person) {
    var job_title;
    
    instance.init(instance, name, age, job_title) {
        || è°ƒç”¨çˆ¶ç±»æž„é€ å‡½æ•°
        Person.init(name, age);
        this.job_title = job_title;
    }
    
    instance.work() {
        System.print(this.name + " is working as a " + this.job_title);
    }
}

func main() {
    var emp = instance Employee("Bob", 25, "Software Engineer");
    emp.greet();  || ç»§æ‰¿è‡ªPersonç±»
    emp.work();   || Employeeç±»è‡ªå·±çš„æ–¹æ³•
    return 0;
}
```

## 7. é”™è¯¯å¤„ç†

Vanctionä½¿ç”¨`try-happen`æœºåˆ¶å¤„ç†é”™è¯¯ï¼š

```vanction
func main() {
    try {
        var result = 10 / 0;  || è¿™ä¼šå¼•å‘DivideByZeroError
        System.print("Result: " + result);
    } happen (DivideByZeroError) as e {
        System.print("Caught an error:");
        System.print("  Text: " + e.text);
        System.print("  Type: " + e.type);
        System.print("  Info: " + e.info);
    }
    
    return 0;
}
```

### 7.1 å†…ç½®é”™è¯¯ç±»åž‹

- `Error`ï¼šæ‰€æœ‰é”™è¯¯çš„åŸºç±»
- `DivideByZeroError`ï¼šé™¤é›¶é”™è¯¯
- `ValueError`ï¼šå€¼é”™è¯¯
- `TypeError`ï¼šç±»åž‹é”™è¯¯
- `MethodError`ï¼šæ–¹æ³•é”™è¯¯
- `ImmutError`ï¼šå¸¸é‡ä¿®æ”¹é”™è¯¯
- `RangeError`ï¼šèŒƒå›´é”™è¯¯
- `ListIndexError`ï¼šåˆ—è¡¨ç´¢å¼•é”™è¯¯

### 7.2 æ•èŽ·æ‰€æœ‰é”™è¯¯

ä½¿ç”¨`Error`ç±»åž‹å¯ä»¥æ•èŽ·æ‰€æœ‰é”™è¯¯ï¼š

```vanction
try {
    || å¯èƒ½å¼•å‘é”™è¯¯çš„ä»£ç 
} happen (Error) as e {
    System.print("Caught an error: " + e.text);
}
```

## 8. æ•°æ®ç»“æž„

### 8.1 åˆ—è¡¨ï¼ˆListï¼‰

åˆ—è¡¨æ˜¯æœ‰åºçš„å…ƒç´ é›†åˆï¼š

```vanction
func main() {
    || åˆ›å»ºåˆ—è¡¨
    var numbers = [1, 2, 3, 4, 5];
    
    || è®¿é—®å…ƒç´ 
    System.print("First element: " + numbers[0]);
    System.print("Last element: " + numbers[-1]);  || æ”¯æŒè´Ÿç´¢å¼•
    
    || ä¿®æ”¹å…ƒç´ 
    numbers[2] = 10;
    
    || æ·»åŠ å…ƒç´ 
    numbers.add(6);
    
    || èŽ·å–åˆ—è¡¨é•¿åº¦
    System.print("Length: " + numbers.size());
    
    || éåŽ†åˆ—è¡¨
    for (var num in numbers) {
        System.print(num);
    }
    
    return 0;
}
```

### 8.2 å“ˆå¸Œè¡¨ï¼ˆHashMapï¼‰

å“ˆå¸Œè¡¨æ˜¯é”®å€¼å¯¹é›†åˆï¼š

```vanction
func main() {
    || åˆ›å»ºå“ˆå¸Œè¡¨
    var person = {
        "name": "Alice",
        "age": 30,
        "city": "New York"
    };
    
    || è®¿é—®å€¼
    System.print("Name: " + person["name"]);
    
    || ä¿®æ”¹å€¼
    person["age"] = 31;
    
    || æ·»åŠ æ–°çš„é”®å€¼å¯¹
    person["email"] = "alice@example.com";
    
    || éåŽ†å“ˆå¸Œè¡¨
    for (key, value in person) {
        System.print(key + ": " + value);
    }
    
    || èŽ·å–æ‰€æœ‰é”®
    var keys = person.key();
    System.print("Keys: " + keys);
    
    return 0;
}
```

## 9. æ¨¡å—å’Œå¯¼å…¥

### 9.1 æ¨¡å—ç³»ç»Ÿ

Vanctionæ”¯æŒå°†ä»£ç ç»„ç»‡ä¸ºæ¨¡å—ï¼Œä¾¿äºŽé‡ç”¨å’Œç®¡ç†ï¼š

```vanction
|| å¯¼å…¥æ¨¡å—
import math;

func main() {
    var result = math.add(5, 3);
    System.print("Result: " + result);
    return 0;
}
```

### 9.2 å‘½åç©ºé—´

ä½¿ç”¨å‘½åç©ºé—´ç»„ç»‡ä»£ç ï¼š

```vanction
|| å®šä¹‰å‘½åç©ºé—´
namespace utils {
    func add(a, b) {
        return a + b;
    }
    
    func subtract(a, b) {
        return a - b;
    }
}

func main() {
    var sum = utils:add(5, 3);
    var diff = utils:subtract(5, 3);
    System.print("Sum: " + sum + ", Diff: " + diff);
    return 0;
}
```

## 10. å­—ç¬¦ä¸²æ“ä½œ

### 10.1 å­—ç¬¦ä¸²è¿žæŽ¥

ä½¿ç”¨`+`è¿ç®—ç¬¦è¿žæŽ¥å­—ç¬¦ä¸²ï¼š

```vanction
var name = "Vanction";
var greeting = "Hello, " + name + "!";
System.print(greeting);  || è¾“å‡º: Hello, Vanction!
```

### 10.2 å­—ç¬¦ä¸²ç´¢å¼•

è®¿é—®å­—ç¬¦ä¸²ä¸­çš„å•ä¸ªå­—ç¬¦ï¼š

```vanction
var str = "Hello";
System.print(str[0]);  || è¾“å‡º: H
System.print(str[-1]); || è¾“å‡º: o
```

### 10.3 å­—ç¬¦ä¸²æ–¹æ³•

```vanction
var str = "Hello, Vanction!";
System.print(str.length());  || èŽ·å–é•¿åº¦
System.print(str.upper());   || è½¬æ¢ä¸ºå¤§å†™
System.print(str.lower());   || è½¬æ¢ä¸ºå°å†™
System.print(str.contains("Vanction"));  || æ£€æŸ¥æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²
```

## 11. é«˜çº§ç‰¹æ€§

### 11.1 é—­åŒ…

Vanctionæ”¯æŒé—­åŒ…ï¼š

```vanction
func make_counter() {
    var count = 0;
    
    func increment() {
        count = count + 1;
        return count;
    }
    
    return increment;
}

func main() {
    var counter = make_counter();
    System.print(counter());  || è¾“å‡º: 1
    System.print(counter());  || è¾“å‡º: 2
    System.print(counter());  || è¾“å‡º: 3
    return 0;
}
```

### 11.2 Lambdaè¡¨è¾¾å¼

æ”¯æŒåŒ¿åå‡½æ•°ï¼š

```vanction
func main() {
    var add = func(a, b) { return a + b; };
    System.print(add(5, 3));  || è¾“å‡º: 8
    return 0;
}
```

### 11.3 ç±»åž‹è½¬æ¢

```vanction
var num_str = "123";
var num = type.int(num_str);  || å­—ç¬¦ä¸²è½¬æ•´æ•°
System.print(num);  || è¾“å‡º: 123

var float_str = "3.14";
var float_num = type.float(float_str);  || å­—ç¬¦ä¸²è½¬æµ®ç‚¹æ•°
System.print(float_num);  || è¾“å‡º: 3.14

var int_num = 42;
var str_num = type.string(int_num);  || æ•´æ•°è½¬å­—ç¬¦ä¸²
System.print(str_num);  || è¾“å‡º: "42"
```

## 12. æœ€ä½³å®žè·µ

1. **å‘½åè§„èŒƒ**ï¼šä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ï¼ˆsnake_caseï¼‰
2. **ä»£ç é£Žæ ¼**ï¼šä¿æŒä¸€è‡´çš„ç¼©è¿›å’Œæ¢è¡Œ
3. **é”™è¯¯å¤„ç†**ï¼šæ€»æ˜¯å¤„ç†å¯èƒ½å‡ºçŽ°çš„é”™è¯¯
4. **æ¨¡å—åŒ–**ï¼šå°†ä»£ç ç»„ç»‡ä¸ºå¤šä¸ªæ¨¡å—
5. **æ³¨é‡Š**ï¼šä¸ºå¤æ‚ä»£ç æ·»åŠ æ³¨é‡Š
6. **æµ‹è¯•**ï¼šç¼–å†™æµ‹è¯•ç”¨ä¾‹éªŒè¯ä»£ç æ­£ç¡®æ€§

## 13. ç¤ºä¾‹ç¨‹åº

åœ¨`examples`ç›®å½•ä¸‹æä¾›äº†å¤šä¸ªç¤ºä¾‹ç¨‹åºï¼Œå±•ç¤ºäº†Vanctionè¯­è¨€çš„å„ç§ç‰¹æ€§ï¼š

- `hello_world.vn`ï¼šç®€å•çš„Hello Worldç¨‹åº
- `basic_arithmetic.vn`ï¼šåŸºæœ¬ç®—æœ¯è¿ç®—
- `conditionals_loops.vn`ï¼šæ¡ä»¶è¯­å¥å’Œå¾ªçŽ¯
- `switch_test.vn`ï¼šswitchè¯­å¥ä½¿ç”¨
- `test_error_handling.vn`ï¼šé”™è¯¯å¤„ç†æœºåˆ¶
- `test_data_structures.vn`ï¼šæ•°æ®ç»“æž„ä½¿ç”¨
- `hash_map.vn`ï¼šå“ˆå¸Œè¡¨ä½¿ç”¨ç¤ºä¾‹
- `namespace_class.vn`ï¼šå‘½åç©ºé—´å’Œç±»

## 14. å¸¸è§é—®é¢˜

### 14.1 ä¸ºä»€ä¹ˆæˆ‘çš„ç¨‹åºç¼–è¯‘å¤±è´¥ï¼Ÿ

æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- è¯­æ³•é”™è¯¯
- ç¼ºå°‘ä¾èµ–
- å˜é‡æœªå£°æ˜Ž
- ç±»åž‹ä¸åŒ¹é…

### 14.2 å¦‚ä½•è°ƒè¯•ç¨‹åºï¼Ÿ

ä½¿ç”¨`System.print()`è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œæˆ–è€…åœ¨ç¼–è¯‘æ—¶æ·»åŠ è°ƒè¯•æ ‡å¿—ã€‚

### 14.3 å¦‚ä½•æ‰©å±•Vanctionï¼Ÿ

å¯ä»¥é€šè¿‡ä¿®æ”¹æºä»£ç æ¥æ‰©å±•Vanctionè¯­è¨€ï¼Œä¸»è¦æ¶‰åŠä»¥ä¸‹æ–‡ä»¶ï¼š
- `lexer.cpp`ï¼šè¯æ³•åˆ†æžå™¨
- `parser.cpp`ï¼šè¯­æ³•åˆ†æžå™¨
- `code_generator.cpp`ï¼šä»£ç ç”Ÿæˆå™¨

## 15. è¿›ä¸€æ­¥å­¦ä¹ 

- é˜…è¯»`å¼€å‘æ–‡æ¡£.md`äº†è§£Vanctionçš„å†…éƒ¨å®žçŽ°
- æŸ¥çœ‹ç¤ºä¾‹ç¨‹åºå­¦ä¹ å®žé™…ç”¨æ³•
- å‚ä¸Žé¡¹ç›®å¼€å‘ï¼Œè´¡çŒ®ä»£ç 

---

æ­å–œä½ å®Œæˆäº†Vanctionç¼–ç¨‹è¯­è¨€æ•™ç¨‹ï¼çŽ°åœ¨ä½ å·²ç»æŽŒæ¡äº†Vanctionçš„åŸºæœ¬ç‰¹æ€§å’Œç”¨æ³•ï¼Œå¯ä»¥å¼€å§‹ç¼–å†™è‡ªå·±çš„ç¨‹åºäº†ã€‚

ç¥ä½ ç¼–ç¨‹æ„‰å¿«ï¼ðŸš€